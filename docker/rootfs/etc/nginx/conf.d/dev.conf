server {
	listen 81 default;
	server_name nginxproxymanager-dev;

	location /api {
		return 302 /api/;
	}

	location /api/ {
		add_header            X-Served-By $host;
		proxy_set_header Host $host;
		proxy_set_header      X-Forwarded-Scheme $scheme;
		proxy_set_header      X-Forwarded-Proto  $scheme;
		proxy_set_header      X-Forwarded-For    $remote_addr;
		proxy_pass            http://127.0.0.1:3000/api/;
	}

	location ~ .html {
		try_files $uri =404;
	}

	location / {
		add_header            X-Served-By $host;
		proxy_http_version    1.1;
		proxy_set_header Host $host;
		proxy_set_header      Upgrade $http_upgrade;
		proxy_set_header      Connection "Upgrade";
		proxy_set_header      X-Forwarded-Scheme $scheme;
		proxy_set_header      X-Forwarded-Proto  $scheme;
		proxy_set_header      X-Forwarded-For    $remote_addr;
		proxy_pass            http://127.0.0.1:9000;
	}
}
